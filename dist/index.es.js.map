{"version":3,"file":"index.es.js","sources":["../src/utils.js","../src/location.svg","../src/Map.js","../src/GeolocationField.js"],"sourcesContent":["export const coordValidation = (val, coord) => {\n  switch (coord) {\n    case 'lat':\n      return val > -90.0 && val < 90.0\n    case 'lng':\n      return val > -180.0 && val < 180.0\n    default:\n      return false\n  }\n}\n\nexport const computeValue = (rawValue, oldValue, coord) => {\n  if (!rawValue.match(/^-?\\d*\\.?\\d*$/)) {\n    return [oldValue, true]\n  }\n  if (!rawValue) {\n    return [undefined, false]\n  }\n  if (rawValue.endsWith('.')) {\n    // Special case for final \".\"\n    return [rawValue, true]\n  }\n  const nextValue = parseFloat(rawValue)\n  if (isNaN(nextValue)) {\n    return [rawValue, true]\n  }\n  if (!coordValidation(nextValue, coord)) {\n    return [oldValue, true]\n  }\n  return [nextValue, false]\n}\n","export default \"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%20%20%20%20%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v24H0V0z%22%2F%3E%20%20%20%20%3Cpath%20d%3D%22M12%202C8.14%202%205%205.14%205%209c0%205.25%207%2013%207%2013s7-7.75%207-13c0-3.86-3.14-7-7-7zm4%208h-3v3h-2v-3H8V8h3V5h2v3h3v2z%22%2F%3E%3C%2Fsvg%3E\"","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport Map from 'ol/Map'\nimport Tile from 'ol/layer/Tile'\nimport VectorLayer from 'ol/layer/Vector'\nimport VectorSource from 'ol/source/Vector'\nimport OSM from 'ol/source/OSM'\nimport View from 'ol/View'\nimport * as proj from 'ol/proj'\nimport Style from 'ol/style/Style'\nimport Icon from 'ol/style/Icon'\nimport Feature from 'ol/Feature'\nimport Point from 'ol/geom/Point'\nimport ZoomSlider from 'ol/control/ZoomSlider'\n\nimport Geocoder from 'ol-geocoder'\n\nimport img from './location.svg'\n\nconst zoomslider = new ZoomSlider()\n\nconst icon = new Icon({\n  src: img,\n  // size: [30, 30],\n  // imgSize: [30, 30],\n  scale: 1.5,\n  anchor: [0.5, 0.95],\n})\nconst iconStyle = new Style({\n  image: icon,\n})\n\n// const markers = new Markers('Markers')\n// map.addLayer(markers);\n\nconst CLOSED_MAP_H = 60\n\nconst MapContainer = styled.div`\n  margin-top: 1em;\n  margin-bottom: 1em;\n  height: ${props => (props.expanded ? 'auto' : `${CLOSED_MAP_H}px`)};\n  overflow-y: hidden;\n  // box-shadow: 0px 30px 40px rgba(0,0,0,.1);\n`\n\nconst MapCover = styled.button`\n  display: block;\n  width: 100%;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  height: ${props => (props.expanded ? 'auto' : `${CLOSED_MAP_H}px`)};\n  background: linear-gradient(rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 1));\n  cursor: s-resize;\n`\n\nconst MapClose = MapCover.extend`\n  cursor: n-resize;\n  bottom: 0;\n  height: ${props => (props.expanded ? 'auto' : `${CLOSED_MAP_H / 2}px`)};\n  position: absolute;\n`\n\nconst MapArea = styled.div`\n  height: ${props => props.height};\n  cursor: pointer;\n  position: relative\n  top: ${props => (props.expanded ? '0' : `-${CLOSED_MAP_H}px`)};\n  ${props => (props.expanded ? '' : 'z-index: -1;')}\n`\n\nconst nop = () => {}\n\nclass MapSelection extends PureComponent {\n  static propTypes = {\n    name: PropTypes.string.isRequired,\n    onUpdateCoords: PropTypes.func,\n    lat: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    lng: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    centerLat: PropTypes.number,\n    centerLng: PropTypes.number,\n    zoom: PropTypes.number,\n    height: PropTypes.string,\n    geocoder: PropTypes.object,\n  }\n\n  static defaultProps = {\n    onUpdateCoords: nop,\n    zoom: 4,\n    height: '60vh',\n    geocoder: {\n      provider: 'osm',\n      placeholder: 'Search for ...',\n      targetType: 'glass-button',\n      limit: 5,\n      keepOpen: false,\n      autoComplete: true,\n      autoCompleteMinLength: 4,\n      preventDefault: true,\n    },\n  }\n\n  state = {\n    mapExpanded: false,\n  }\n\n  constructor(props) {\n    super(props)\n    this.geocoder = new Geocoder('nominatim', props.geocoder)\n    this.vectorSource = new VectorSource({\n      // create empty vector\n    })\n    this.vectorLayer = new VectorLayer({\n      source: this.vectorSource,\n      style: iconStyle,\n    })\n\n    this.map = null\n    this.id = `map_${props.name}`\n  }\n\n  mapAction = (rawLng, rawLat) => {\n    const [lng, lat] = proj.transform([rawLng, rawLat], 'EPSG:3857', 'EPSG:4326')\n    this.props.onUpdateCoords({ lat, lng })\n  }\n\n  handleAdressSelection = evt => {\n    const [lng, lat] = evt.coordinate\n    this.mapAction(lng, lat)\n    this.centerMap()\n  }\n\n  handleMap = ev => {\n    this.setState(oldState => ({\n      mapExpanded: !oldState.mapExpanded,\n    }))\n  }\n\n  handleMapClick = evt => {\n    const [lng, lat] = evt.coordinate\n    this.mapAction(lng, lat)\n  }\n\n  drawPoint = () => {\n    const { name, lat, lng } = this.props\n    if (lat === '' && lng === '') {\n      return\n    }\n    this.vectorSource.clear()\n    const iconFeature = new Feature({\n      geometry: new Point(proj.transform([lng, lat], 'EPSG:4326', 'EPSG:3857')),\n      name,\n      foo: 1,\n    })\n    this.vectorSource.addFeature(iconFeature)\n  }\n\n  centerMap = () => {\n    const { centerLat, centerLng } = this.props\n    this.map.getView().setCenter(proj.transform([centerLng, centerLat], 'EPSG:4326', 'EPSG:3857'))\n  }\n\n  render() {\n    const { mapExpanded } = this.state\n    const { height } = this.props\n    return (\n      <MapContainer expanded={mapExpanded}>\n        {mapExpanded ? '' : <MapCover title='Expand map' onClick={this.handleMap} />}\n        <MapArea id={this.id} height={height} expanded={mapExpanded} />\n        {mapExpanded ? <MapClose title='Collpase map' onClick={this.handleMap} /> : ''}\n      </MapContainer>\n    )\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.lat !== this.props.lat || prevProps.lng !== this.props.lng) {\n      this.drawPoint()\n    }\n  }\n\n  componentDidMount() {\n    const { centerLat, centerLng, zoom } = this.props\n    this.map = new Map({\n      target: this.id,\n      layers: [\n        new Tile({\n          source: new OSM(),\n        }),\n        this.vectorLayer,\n      ],\n      view: new View({\n        center: proj.fromLonLat([centerLng, centerLat]),\n        zoom: zoom,\n      }),\n    })\n    this.map.addControl(zoomslider)\n    this.geocoder.on('addresschosen', this.handleAdressSelection)\n    this.map.addControl(this.geocoder)\n    this.map.on('singleclick', this.handleMapClick)\n    this.drawPoint()\n  }\n}\n\nexport default MapSelection\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { computeValue } from './utils'\nimport Map from './Map'\n\nconst Row = styled.div`\n  .input-group-addon {\n    min-width: 8em;\n  }\n`\n\nconst getDefaults = schema => {\n  const defaults = {}\n  const values = ['lat', 'lng']\n  values.forEach(v => {\n    if (\n      schema.properties &&\n      schema.properties[v] !== undefined &&\n      schema.properties[v].default\n    ) {\n      defaults[v] = schema.properties[v].default\n    }\n  })\n  return defaults\n}\n\nexport default class GeolocationField extends PureComponent {\n  static propTypes = {\n    formData: PropTypes.object,\n    schema: PropTypes.object.isRequired,\n    uiSchema: PropTypes.object,\n    onChange: PropTypes.func,\n    name: PropTypes.string.isRequired,\n  }\n\n  static defaultProps = {\n    onChange: () => {},\n  }\n\n  state = {\n    lat: null,\n    lng: null,\n  };\n\n  handleUpdateCoords = ({ lat, lng }) => {\n    this.setState(oldState => {\n      this.props.onChange({ ...oldState, ...{ lat, lng } })\n      return {\n        lat,\n        lng,\n      }\n    })\n  }\n\n  handleKeyPress = evt => {\n    if (evt.key === 'Enter') {\n      this.map.centerMap()\n      evt.preventDefault()\n      evt.stopPropagation()\n    }\n  }\n\n  onChange(name) {\n    return event => {\n      const rawValue = event.target.value\n      this.setState(oldState => {\n        const [nextVal, invalid] = [\n          ...computeValue(rawValue, oldState[name], name),\n        ]\n        if (nextVal === oldState[name]) {\n          return null\n        }\n        if (!invalid) {\n          this.props.onChange({ ...oldState, ...{ [name]: nextVal } })\n        }\n        return {\n          [name]: nextVal,\n        }\n      })\n    }\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { schema } = props\n    let { lat = '', lng = '' } = props.formData\n    const defaults = getDefaults(schema)\n    if (lat === '' && defaults.lat !== undefined) {\n      lat = defaults.lat\n    }\n    if (lng === '' && defaults.lng !== undefined) {\n      lng = defaults.lng\n    }\n    return { lat, lng }\n  }\n\n  render() {\n    const { schema, uiSchema, name } = this.props\n    const { zoom, defaultLocation, height, showTitle = true } = uiSchema\n    const { title, properties = {} } = schema\n    const latInfo = properties.lat || {}\n    const lngInfo = properties.lng || {}\n    const { lat, lng } = this.state\n    const latId = `${name}_lat`\n    const lngId = `${name}_lng`\n    return (\n      <Row className='row'>\n        {showTitle ? (\n          <div className='col-xs-12'>\n            <label htmlFor={latId}>{title || name}</label>\n          </div>\n        ) : (\n          ''\n        )}\n        <div className='col-xs-12 col-sm-6'>\n          <div className='input-group'>\n            <span className='input-group-addon' id={latId}>\n              {latInfo.title || 'Latitude'}\n            </span>\n            <input\n              autoComplete='off'\n              className='form-control'\n              aria-describedby={latId}\n              type='text'\n              id={`${latId}_field`}\n              value={lat}\n              onKeyPress={this.handleKeyPress}\n              onChange={this.onChange('lat')}\n            />\n          </div>\n        </div>\n        <div className='col-xs-12 col-sm-6'>\n          <div className='input-group'>\n            <span className='input-group-addon' id={lngId}>\n              {lngInfo.title || 'Longitude'}\n            </span>\n            <input\n              autoComplete='off'\n              className='form-control'\n              aria-describedby={lngId}\n              type='text'\n              id={`${lngId}_field`}\n              value={lng}\n              onKeyPress={this.handleKeyPress}\n              onChange={this.onChange('lng')}\n            />\n          </div>\n        </div>\n        <div className='col-xs-12'>\n          <Map\n            ref={map => (this.map = map)}\n            name={name}\n            centerLat={lat || defaultLocation.lat}\n            centerLng={lng || defaultLocation.lng}\n            lat={lat}\n            lng={lng}\n            height={height}\n            zoom={zoom}\n            onUpdateCoords={this.handleUpdateCoords}\n          />\n        </div>\n      </Row>\n    )\n  }\n}\n"],"names":["coordValidation","val","coord","computeValue","rawValue","oldValue","match","undefined","endsWith","nextValue","parseFloat","isNaN","zoomslider","ZoomSlider","icon","Icon","img","iconStyle","Style","CLOSED_MAP_H","MapContainer","styled","div","props","expanded","MapCover","button","MapClose","extend","MapArea","height","nop","MapSelection","state","mapAction","rawLng","rawLat","proj","lng","lat","onUpdateCoords","handleAdressSelection","evt","coordinate","centerMap","handleMap","setState","oldState","mapExpanded","handleMapClick","drawPoint","name","vectorSource","clear","iconFeature","Feature","Point","addFeature","centerLat","centerLng","map","getView","setCenter","geocoder","Geocoder","VectorSource","vectorLayer","VectorLayer","id","prevProps","zoom","Map","Tile","OSM","View","addControl","on","PureComponent","propTypes","PropTypes","string","isRequired","func","oneOfType","number","object","defaultProps","Row","getDefaults","defaults","values","forEach","schema","properties","v","default","GeolocationField","handleUpdateCoords","onChange","handleKeyPress","key","preventDefault","stopPropagation","event","target","value","nextVal","invalid","uiSchema","defaultLocation","showTitle","title","latInfo","lngInfo","latId","lngId","formData"],"mappings":"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"}